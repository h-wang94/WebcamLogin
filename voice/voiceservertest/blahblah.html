<html>
<body>
<script src="/socket.io/socket.io.js"></script>
<textarea id="result" cols="120" rows="35"></textarea>
<br/>
<textarea id="kommand" cols="120" rows="1"></textarea>
<br/>
<button id="button0" onclick='executeDatCommand();'>Magic</button>
<br/>
Call shell command example ...
</body>
<script>
	// g_state can be "ready" or "awaiting_results"
	var g_state = "ready";
	var cmd = document.getElementById("kommand");
	var result = document.getElementById("result");
	var button0 = document.getElementById("button0");
	var socket = io();
	function executeDatCommand() {
		if(g_state == "ready") {
			g_state = "awaiting_results";
			var cmdline = cmd.value;
			console.log("Send command: " + cmdline);
			button0.disabled = true;
			cmd.disabled = true;
			button0.textContent = "Please wait ...";
			socket.emit('exec', cmdline);
		} else {
			; // Does nothing
		}
	}

	socket.on('response', function(data) {
		var stdout = data[0], stderr = data[1];
		result.innerHTML = stdout + "\n" + stderr;
		g_state = "ready";
		button0.disabled = false;
		cmd.disabled = false;
		button0.textContent = "Magic";
	});
</script>
</html>
